// Reference: http://www.ncbi.nlm.nih.gov/pubmed/18193561
// Decision Making and Learning While Taking Sequential Risks. Pleskac 2008

/* ************************************ */
/* Define helper functions */
/* ************************************ */
function evalAttentionChecks() {
    var check_percent = 1
    if (run_attention_checks) {
        var attention_check_trials = jsPsych.data.getTrialsOfType('attention-check')
        var checks_passed = 0
        for (var i = 0; i < attention_check_trials.length; i++) {
            if (attention_check_trials[i].correct === true) {
                checks_passed += 1
            }
        }
        check_percent = checks_passed / attention_check_trials.length
    }
    return check_percent
}

function assessPerformance() {
    var experiment_data = jsPsych.data.getTrialsOfType('single-stim-button')
    var missed_count = 0
    var trial_count = 0
    var rt_array = []
    var rt = 0
    for (var i = 0; i < experiment_data.length; i++) {
        rt = experiment_data[i].rt
        trial_count += 1
        if (rt == -1) {
            missed_count += 1
        } else {
            rt_array.push(rt)
        }
    }
    //calculate average rt
    var sum = 0
    for (var j = 0; j < rt_array.length; j++) {
        sum += rt_array[j]
    }
    var avg_rt = sum / rt_array.length || -1
    var missed_percent = missed_count/experiment_data.length
    credit_var = (missed_percent < 0.4 && avg_rt > 200)
    if (credit_var === true) {
        performance_var = total_points
    } else {
        performance_var = 0
    }
    jsPsych.data.addDataToLastTrial({"credit_var": credit_var, "performance_var": performance_var})

}

var getInstructFeedback = function() {
    return '<div class = centerbox><p class = center-block-text>' + feedback_instruct_text +
        '</p></div>'
}

function appendTextAfter(input, search_term, new_text) {
    var index = input.indexOf(search_term) + search_term.length
    return input.slice(0, index) + new_text + input.slice(index)
}

function getRoundOverText() {
    return '<div class = centerbox><p class = center-block-text>' + round_over_text +
        ' Diesen Teich können Sie nicht mehr beangeln</p><p class = center-block-text>Drücken Sie <strong>enter</strong> um zum nächsten Teich zu gehen.</p></div>'
}

function getGame() {
    /* At the beginning of each round the task displays either a new lake (if a new tournament is starting)
    or the state of the lake from the last round after the action had been chosen. This function works
    by editing "game_setup" a string which determines the html to display, followed by calling the "makeFish"
    function, which...makes fish.
    */

    // On a start of a round the round_over is set to 0
    if (num_fish_curr_pond === num_fish_in_ponds[indx_fish_curr_pond]){
        round_over = 0
    }
    
    // Update game state with cached values
    game_state = game_setup
    game_state = appendTextAfter(game_state, 'lake>', lake_state)

    game_state = appendTextAfter(game_state, 'Fische (Teich): </strong>', trip_bank)
    game_state = appendTextAfter(game_state, 'Bonuspunkte Gesamt: </strong>', tournament_bank)
    game_state = appendTextAfter(game_state, "Catch N' ", release)
    game_state = appendTextAfter(game_state, "weathertext>", weather)
    game_state = appendTextAfter(game_state, "goFish(true) disabled", "='true'")

    $('.jspsych-display-element').html(game_state)
    $('.lake').css("background-color", "LightBlue")
    
    clearTimeout(main_timeout);

    // Don't make fish if there's no fish
    if (num_fish_curr_pond > 0){
        main_timeout = setTimeout(() => {
            console.log("-- Inside main_timeout (after waitin' for some time): ", fishWaitingTime())

            makeFish(1)

            clearTimeout(fish_appear_timeout);
            fish_appear_timeout = setTimeout(() => {
                console.log("---- Reloading dom because 5 seconds have passed since fish appeared")

                // Trigger end of block button
                var hiddenTrigger = document.getElementById("hiddenTrigger");
                hiddenTrigger.click(); 

            }, 5000);

        }, fishWaitingTime());
    }

}

var fishWaitingTime = function() {
    return 1000 / (0.005 * num_fish_curr_pond)
}

function get_data() {
    /* Records state of the world before the person made their choice
     */
    var data = {
        exp_stage: "test",
        trial_id: "stim",
        red_fish_num: red_fish_num,
        trip_bank: trip_bank,
        tournament_bank: tournament_bank,
        weather: weather,
        release: release,
        round_num: round_num,
        trial_num: trial_num
    }
    trial_num += 1
    return data
}

function get_practice_data() {
    /* Records state of the world before the person made their choice
     */
    var data = {
        exp_stage: "practice",
        trial_id: "stim",
        red_fish_num: red_fish_num,
        trip_bank: trip_bank,
        tournament_bank: tournament_bank,
        weather: weather,
        release: release,
        round_num: round_num,
        trial_num: trial_num
    }
    trial_num += 1
    return data
}

function makeFish(fish_num) {
    /* This function makes fish. This includes setting the global variables that track fish number and displaying the
        fish in the lake if it is sunny out. It uses the placeFish function to set the fish locations
    
    */
    $(".redfish").remove();
    $(".bluefish").remove();
    $(".greyfish").remove();
    $("#goFish").prop("disabled", false);
    // $("#rbutton_"+i).prop("disabled",true);
    red_fish_num = 0

    filled_areas = [];
    if (max_x === 0) {
        min_x = $('.lake').width() * 0.05;
        min_y = $('.lake').height() * 0.05;
        max_x = $('.lake').width() * 0.9;
        max_y = $('.lake').height() * 0.9;
    }
    for (i = 0; i < fish_num; i++) {
        red_fish_num += 1
        if (weather == "Sunny") {
            $('.lake').append('<div class = redfish id = red_fish' + red_fish_num + '></div>')
        }
    }
    place_fish()

}

function goFish(shouldPay) {
    /* If the subject chooses to goFish, one fish is randomly selected from the lake. If it is red, the trip bank
        is increased by "pay". If it is blue the round ends. If the release rule is "Keep", the fish is also removed
        from the lake. Coded as keycode 36 for jspsych
    */

    if (num_fish_curr_pond === 0) {
        $('#blue_fish').remove();
        

        $(".lake").html('')

    } else {
        $('#red_fish' + red_fish_num).remove()

        if (shouldPay){
            red_fish_num -= 1
            num_fish_curr_pond -= 1

            trip_bank += pay
        }
    }

    lake_state = $('.lake').html()
    
    
    clearTimeout(fish_appear_timeout);
    clearTimeout(main_timeout);

    console.log("==== Inside goFish")
    console.log("==== num_fish_curr_pond: ", num_fish_curr_pond)
}

function collect() {
    console.log("-- Inside collect")
    round_over = 1
    round_num += 1
    round_over_text = "Sie haben " + trip_bank +
        " Fische gesammelt und sie zu den Bonuspunkten addiert."

    game_over_text = "Die Zeit ist nun Abgelaufen. Sie haben insgesamt" + tournament_bank + " Bonuspunkte gesammelt."
        // Tranfers points from trip bank to Total Fish Caught and ends the round. Coded as keycode 35 for jspsych
    tournament_bank += trip_bank

    $(".redfish").remove();
    $(".bluefish").remove();
    $('#tournament_bank').html('<strong>Total Bonuspunkte Gesamt </strong> ' + tournament_bank)
    $('#trip_bank').html('<strong>Fische (Teich):</strong> ' + trip_bank)
    red_fish_num = 0

    indx_fish_curr_pond += 1
    num_fish_curr_pond = num_fish_in_ponds[indx_fish_curr_pond]
    lake_state = $('.lake').html()
    cooler_state = $('.lake').html()
    //reset trip bank.
    trip_bank=0
    clearTimeout(fish_appear_timeout);
    clearTimeout(main_timeout);

    return false
}


function calc_overlap(a1) {
    // helper function when placing fish. 
    var overlap = 0;
    for (var i = 0; i < filled_areas.length; i++) {
        a2 = filled_areas[i]
            // no intersection cases
        if (a1.x + a1.width < a2.x) {
            continue;
        }
        if (a2.x + a2.width < a1.x) {
            continue;
        }
        if (a1.y + a1.height < a2.y) {
            continue;
        }
        if (a2.y + a2.height < a1.y) {
            continue;
        }

        // intersection exists : calculate it !
        var x1 = Math.max(a1.x, a2.x);
        var y1 = Math.max(a1.y, a2.y);
        var x2 = Math.min(a1.x + a1.width, a2.x + a2.width);
        var y2 = Math.min(a1.y + a1.height, a2.y + a2.height);

        var intersection = ((x1 - x2) * (y1 - y2));

        overlap += intersection;

    }
    return overlap;
}

function place_fish() {
    /* Places fish in the lake and attempts to overlap them as little as possible. It does this by randomly placing the fish
       up to maxSearchIterations times. It stops if it places the fish with no overlap. Otherwise, the fish goes where there is the
       least overlap. 
    */
    var index = 0;
    fish_types = ['redfish', 'bluefish', 'greyfish']
    for (f = 0; f < fish_types.length; f++) {
        fish = fish_types[f]
        $('.' + fish).each(function(index) {
            var rand_x = 10;
            var rand_y = 10;
            var smallest_overlap = '';
            var best_choice;
            var area;
            for (var i = 0; i < maxSearchIterations; i++) {
                rand_x = Math.round(min_x + ((max_x - min_x) * (Math.random())));
                rand_y = Math.round(min_y + ((max_y - min_y) * (Math.random())));
                area = {
                    x: rand_x,
                    y: rand_y,
                    width: $(this).width(),
                    height: $(this).height()
                };
                var overlap = calc_overlap(area);
                if (smallest_overlap === '') {
                    smallest_overlap = overlap
                    best_choice = area
                } else if (overlap < smallest_overlap) {
                    smallest_overlap = overlap;
                    best_choice = area;
                }
                if (overlap === 0) {
                    break;
                }
            }

            filled_areas.push(best_choice)
            $(this).css({
                position: "absolute",
                "z-index": index++
            });

            $(this).css({
                left: rand_x,
                top: rand_y
            });
        });
    }
}


/* ************************************ */
/* Define experimental variables */
/* ************************************ */
// generic task variables
var run_attention_checks = false
var attention_check_thresh = 0.45
var sumInstructTime = 0 //ms
var instructTimeThresh = 0 ///in seconds
var credit_var = true
var performance_var = 0

// task specific variables
var num_practice_rounds = 1
var num_rounds = 5
var num_fish_in_ponds = [6,8,8,1,4,11,6,5,6,2,6,4,5,6,6,2,17,3,8,3,8,23,5,13,7,3,8,7,2,5,8,
    5,15,4,6,9,5,7,6,8,3,7,15,10,12,7,5,8,2,11,16,7,4,5,13,11,3,7,5,2,12,
    3,7,2,7,5,7,4,6,4,1,8,17,5,7,2,7,8,5,3,5,2,8,10,6,9,10,6,10,7,12,
    7,11,6,5,8,3,4,10,12,7,9,4,5,5,3,2,5,6,8,4,4,5,12,11,11,6,6,8,12,4,
    10,2,3,5,11,14,3,4,17,7,6,9,11,2,17,15,7,3,3,7,17,5,5,9,13,4,9,9,11,2,
    3,2,2,13,11,3,13,11,3,2,1,10,6,12,8,5,6,9,6,10,4,3,8,13,10,4,10,12,2,4,
    18,15,7,6,6,8,14,2,1,5,5,6,15,7,4,13,2,10,1,5,4,3,7,3,12,1,7,6,7,5,
    7,10,7,6,6,2,1,9,6,3,11,6,8,19,4,4,8,5,10,5,9,4,5,8,4,2,11,9,11,19,
    4,7,2,12,2,3,8,5,12,15,7,2,12,11,6,7,9,14,6,2,6,7,6,18,6,17,8,3,13,2,
    13,10,8,4,4,8,13,7,8,12,6,8,2,9,5,0,11,12,3,4,7,8,9,5,16,8,8,7,21,14,
    6,6,10,9,2,9,5,25,7,11,10,3,4,2,6,4,13,6,7,10,17,9,9,13,6,10,8,6,15,7,
    11,11,4,5,7,10,4,10,6,8,9,6,6,2,5,3,6,4,12,10,6,7,5,10,9,7,4,11,11,3,
    1,6,13,9,3,4,16,6,5,10,10,4,5,2,9,4,18,3,5,4,7,11,13,4,17,5,6,5,5,6,
    4,10,2,15,8,9,20,4,8,15,8,9,3,6,12,3,5,3,6,2,0,14,7,4,15,4,7,5,5,2,
    2,4,11,3,10,4,6,3,6,2,8,5,2,5,8,7,7,5,9,10,4,6,7,2,4,6,11,9,7,5,
    6,16,1,7,9,5,17,3,8,6,5,6,6,2,2,6,6,10,4,6,3,11,5,14,6,7,11,15,1,10,
    6,11,7,14,11,16,3,10,4,4,3,9,8,7,7,15,5,11,12,3,5,7,4,2,4,5,13,13,7,16,
    6,5,9,8,8,6,4,5,5,4,6,8,2,4,8,10,5,3,16,3,6,7,8,6,9,8,5,3,9,4,
    8,10,9,5,0,5,7,17,3,6,6,6,20,6,9,7,4,11,9,11,9,7,12,6,1,13,5,8,7,10,
    8,11,2,4,8,6,12,1,19,9,11,4,5,16,24,9,8,5,13,11,7,20,9,7,4,9,3,2,2,0,
    9,7,3,15,2,3,6,6,7,7,12,8,7,8,7,1,2,4,15,1,6,4,5,6,7,12,1,6,9,9,
    7,12,8,5,6,13,9,2,7,3,9,7,7,1,16,9,8,8,7,5,4,8,6,12,4,9,11,5,4,7,
    12,4,9,12,8,6,3,6,14,6,4,3,11,7,9,14,3,8,9,4,5,5,3,5,8,3,9,7,7,5,
    6,13,4,11,6,4,6,7,6,6,8,9,15,5,3,19,12,5,9,8,5,6,3,10,12,1,17,5,15,8,
    12,2,17,6,1,3,3,5,6,16,7,4,2,4,5,8,2,3,4,4,6,7,11,8,16,3,7,4,12,8,
    10,15,6,18,13,10,5,7,5,3,4,5,7,6,7,3,5,18,4,10,8,6,10,4,7,1,9,7,9,6,
    6,7,2,3,0,15,7,2,6,8,9,7,7,4,9,7,13,26,6,4,6,6,6,4,13,8,2,6,7,1,
    5,8,8,6,12,4,6,8,5,2,23,7,4,7,16,4,6,3,9,10,9,1,14,10,7,14,2,6,5,1,
    8,1,9,5,9,3,4,18,10,3,14,6,8,8,0,8,8,9,11,10,7,4,3,7,10,6,1,4,2,8,
    13,7,5,12,7,5,5,10,1,25,5,9,8,8,9,4,6,3,9,3,2,7,12,16,4,5,8,10,0,9,
    14,9,9,6,7,7,10,5,8,7,11,10,1,9,10,12,6,12,16,10,9,4,8,11,6,13,6,7,21,8,
    4,2,5,9,4,3,9,5,3,2,8,5,12,7,11,15,14,1,4,4,10,9,5,7,5,13,12,10,17,5,
    8,9,8,5,13,8,12,7,7,9,11,6,3,9,4,10,7,11,7,11,6,8,11,1,5,9,11,13,2,11,
    2,12,6,0,8,7,4,10,5,3,9,15,6,3,11,9,5,5,3,12,2,4,5,7,10,3,4,13,8,8,
    4,11,7,5,10,12,5,5,6,5,3,2,13,7,2,8,12,5,6,5,6,3,8,6,13,18,10,7,9,7,
    14,4,1,2,3,9,15,5,18,8,1,7,5,7,8,2,4,4,7,11,9,3,3,5,17,10,11,18,6,1,
    4,13,4,4,6,6,2,12,12,1,8,11,11,2,4,4,9,4,2,2,11,4,4,14,4,8,14,4,4,5,
    3,2,2,6,6,11,13,0,5,4,6,2,5,7,10,6,7,6,7,3,2,11,13,7,3,4,3,10,5,13,
    4,6,1,6,4,7,4,2,4,4,15,7,7,5,4,3,15,16,4,7,10,6,17,7,6,10,6,10,9,3,
    11,4,7,7,3,12,3,6,7,8,2,8,17,2,3,3,8,3,7,11,13,4,3,3,11,3,11,9,2,8,
    3,14,5,16,14,6,1,2,14,13,2,10,14,1,15,3,6,5,5,8,6,6,9,6,3,5,9,6,8,7,
    10,20,11,3,6,6,10,2,6,5,6,16,13,10,3,4,14,7,6,7,10,3,10,6,4,13,3,8,5,3,
    5,8,9,15,13,11,7,11,9,7,5,5,22,7,6,1,18,7,8,3,4,11,4,8,8,5,4,8,4,12,
    9,6,12,3,17,7,10,5,4,6,8,6,17,10,8,15,9,11,6,10,0,16,15,2,11,4,13,11,12,14,
    5,3,5,6,10,4,6,11,20,10,8,3,12,9,7,9,4,9,5,9,13,14,1,6,2,8,4,4,15,11,
    3,8,2,10,14,4,8,12,7,4,3,11,4,4,9,13,4,14,0,8,14,15,6,1,13,4,5,9,6,2,
    8,15,5,7,7,18,3,10,12,5,5,0,8,15,8,7,4,3,9,1,6,3,5,5,3,15,7,7,1,12,
    3,7,12,12,6,7,2,8,13,6,12,5,4,7,6,7,7,7,5,8,7,7,14,4,1,15,9,7,16,4,
    7,9,9,8,8,6,6,10,0,6,1,8,4,5,13,17,11,10,9,5,11,6,8,10,9,3,11,3,16,7,
    0,9,8,5,4,8,5,5,11,6,9,8,1,7,8,9,9,6,6,2,8,8,5,11,3,6,5,10,8,11,
    17,9,4,10,3,1,10,14,17,6,6,5,10,6,7,3,14,6,4,4,2,21,12,5,8,3,5,6,6,5,
    2,11,12,11,6,18,6,2,7,7,3,7,5,10,8,20,8,1,19,9,6,7,16,4,4,3,6,2,12,12,
    4,2,6,11,4,2,9,1,9,9,5,8,7,2,13,6,12,14,11,7,16,6,2,11,6,2,12,6,8,8,
    2,12,9,2,6,9,5,4,1,12,7,5,14,16,2,3,9,5,2,6,6,4,11,7,5,4,11,7,8,5,
    12,2,6,7,2,7,1,19,6,5,8,6,6,11,2,7,4,7,10,18,9,12,8,3,11,6,0,22,6,19,
    4,11,8,3,9,2,7,4,3,5,19,8,20,16,6,5,6,5,7,8,8,12,7,6,7,1,2,5,8,12,
    12,6,11,4,4,6,12,7,9,3,10,5,6,18,7,8,2,6,16,10,10,6,5,7,9,7,4,6,5,3,
    3,11,1,7,6,6,14,5,3,3,8,6,13,4,3,10,7,7,15,5,11,4,10,2,1,7,5,2,11,4,
    9,4,9,10,0,7,16,7,7,7,5,8,6,12,7,5,5,5,4,0,4,3,17,7,9,3,9,7,7,8,
    1,5,13,9,6,1,3,19,8,4,6,7,9,15,9,13,1,8,5,1,6,5,9,4,7,2,7,4,7,13,
    4,6,8,14,6,4,8,6,2,6,7,6,9,3,3,10,3,9,7,16,10,6,8,11,6,3,2,8,6,8,
    7,9,1,12,16,9,9,1,3,17,5,4,2,12,11,2,15,14,2,11,6,13,28,2,4,3,3,8,1,3,
    8,7,1,6,9,5,4,5,13,6,6,2,6,4,10,12,13,6,8,3,4,6,16,14,7,10,5,17,1,8,
    14,11,12,14,7,12,9,12,4,5,8,16,8,8,7,11,17,9,6,0,6,27,5,10,5,6,14,2,10,1,
    6,24,9,10,13,9,2,0,11,10,17,4,6,6,13,15,4,10,8,9,13,5,3,5,10,12,4,2,10,8,
    5,3,2,6,3,8,14,6,2,2,4,11,9,3,5,6,14,6,8,0,6,8,3,4,3,7,2,8,3,6,
    5,6,4,4,12,8,2,5,9,3,3,13,3,11,28,9,8,15,9,11,10,19,2,6,9,13,12,7,11,7,
    3,4,3,7,5,8,4,8,4,12,3,9,7,5,5,4,8,2,5,5,3,10,4,4,14,8,14,6,8,7,
    12,5,8,2,8,8,2,8,6,6,7,7,13,6,7,8,5,22,1,6,4,9,8,6,6,2,10,12,4,5,
    10,5,5,12,7,5,6,11,9,8,12,16,3,8,2,2,11,5,1,21,6,5,1,10,6,9,8,11,9,15,
    1,5,10,7,3,2,9,7,7,1,4,20,4,5,11,12,2,2,9,4,17,4,3,6,8,20,1,36,6,1,
    2,10,5,17,3,0,9,8,4,6,5,11,18,11,5,10,6,10,7,7,3,5,13,12,5,5,8,15,5,11,
    6,13,6,6,2,5,6,15,1,15,14,8,5,8,11,3,2,7,11,2,6,5,10,9,8,13,4,12,13,9,
    2,10,9,13,7,19,5,7,11,1,7,11,16,8,4,5,14,10,13,16,8,5,10,6,9,4,21,7,8,7,
    6,7,7,7,0,6,5,8,11,11,4,7,6,10,11,8,5,6,10,3,5,12,4,10,1,4,11,13,2,17,
    7,6,16,9,7,11,3,14,6,6,12,10,14,2,11,8,4,10,3,4,8,4,5,8,1,2,13,6,4,6,
    6,8,9,14,4,4,13,9,15,2,2,4,9,0,8,13,6,10,4,3,6,6,3,9,8,12,2,13,7,8,
    9,6,6,4,10,3,4,6,3,6,12,11,10,12,5,5,0,6,6,1,1,8,4,20,1,9,7,7,6,8,
    4,4,7,8,14,10,13,5,4,8,9,5,9,3,12,8,7,9,4,10,3,2,4,1,15,8,5,7,14,6,
    9,13,8,5,11,6,2,16,16,16,11,10,9,8,3,5,8,2,10,13,10,8,4,4,7,8,11,5,5,19,
    5,3,11,7,3,11,5,9,11,8,5,5,6,8,5,6,5,4,5,3,4,12,3,7,13,6,5,13,6,13,
    2,7,9,16,21,12,9,9,4,8,7,7,1,9,8,5,3,8,4,3,8,10,1,8,5,5,2,15,1,3,
    5,10,10,4,3,11,4,6,5,4,17,12,13,8,12,2,7,4,9,10,10,3,6,6,17,8,4,10,7,10,
    4,13,9,11,13,4,7,3,10,19,12,8,23,10,8,6,19,5,24,7,10,12,4,9,1,7,1,9,7,7,
    17,4,5,9,5,9,5,11,1,4,6,6,2,5,9,11,4,4,6,2,4,4,5,7,3,14,14,10,6,5,
    6,3,7,15,5,6,7,11,5,15,20,10,19,2,5,4,10,18,8,10,3,11,8,10,10,7,4,5,6,11,
    4,2,9,14,7,6,10,13,2,8,1,11,7,5,14,1,6,6,1,8,1,8,8,10,4,7,9,1,5,6,
    17,14,8,8,8,11,8,9,2,20,5,3,4,9,3,13,3,10,1,2,6,5,3,1,3,11,1,2,5,2,
    7,7,1,6,13,13,13,9,5,15,3,4,1,2,18,5,2,1,7,7,0,9,5,5,8,3,6,13,17,11,
    3,4,9,5,7,7,3,8,10,3,9,7,1,20,17,3,7,4,6,2,10,9,6,9,8,3,11,3,7,0,
    14,3,5,3,5,11,5,19,9,6,4,4,11,20,12,2,8,5,5,6,18,4,15,8,7,19,20,16,5,8,
    6,2,2,9,9,3,6,7,7,15,4,3,4,10,2,4,3,4,4,6,3,6,9,7,7,3,4,5,14,6,
    6,7,14,9,5,4,5,9,5,9,3,7,6,7,10,7,5,4,6,13,11,10,13,5,6,8,5,6,12,10,
    13,5,9,5,4,4,7,5,7,21,2,1,6,7,20,9,6,14,10,11,5,8,9,14,7,5,19,12,4,9,
    2,7,4,9,5,11,16,13,8,17,4,5,13,4,4,9,10,7,8,16,5,5,6,20,6,3,9,2,8,7,
    14,9,4,8,13,10,5,6,11,6,10,9,8,4,11,2,9,7,16,2,5,8,4,16,7,10,4,11,12,4,
    11,5,6,16,10,7,4,8,15,9,9,2,5,17,3,4,7,9,13,9,6,4,4,9,15,2,2,5,11,9,
    10,16,13,8,9,11,3,14,9,4,6,11,11,1,11,7,5,6,5,7,1,12,12,2,2,13,11,10,12,7,
    7,10,3,5,3,5,4,6,6,6,8,10,12,13,15,5,5,4,7,3,2,8,14,6,16,1,3,3,10,10,
    4,7,10,7,11,14,12,9,8,9,3,6,12,7,7,3,4,7,13,5,3,6,12,2,10,22,9,6,15,7,
    4,9,31,8,17,9,4,10,8,6,18,5,4,3,2,5,7,9,4,3,5,9,6,7,12,0,12,5,8,12,
    3,8,3,5,3,5,14,4,4,11,9,4,11,10,4,4,11,13,5,6,5,20,6,10,11,3,1,8,12,15,
    9,8,7,9,18,10,7,6,14,11,7,3,4,11,4,8,10,5,4,18,10,11,4,7,3,3,2,2,4,13,
    11,9,5,4,2,12,12,5,11,6,9,9,8,11,11,5,4,4,3,8,2,12,8,6,5,7,12,13,12,8,
    10,12,1,6,3,9,4,5,2,4,13,15,7,8,12,6,14,7,7,9,12,4,13,3,10,9,10,18,6,4,
    7,13,7,5,2,12,13,10,8,9,8,7,7,12,1,9,5,3,1,10,6,10,8,15,14,3,7,9,10,4,
    8,4,6,13,4,3,16,2,0,7,13,6,9,7,9,4,3,17,9,2,8,6,12,14,3,6,12,9,1,3,
    8,10,5,8,10,5,4,6,3,1,11,1,6,5,5,9,4,17,3,3,4,2,4,9,4,4,7,14,8,3,
    12,6,12,4,9,7,4,5,6,12,7,8,2,3,2,10,9,11,4,7,4,5,7,6,2,5,10,9,10,10,
    7,24,5,12,11,20,7,3,6,8,6,11,4,4,6,16,10,3,8,21,7,10,6,5,21,7,7,5,7,11,
    12,5,18,9,1,5,8,5,8,1,4,5,4,12,10,4,6,11,16,17,0,14,12,3,11,6,9,8,10,8,
    12,1,9,6,14,16,10,6,6,6,2,6,2,3,16,7,6,3,14,5,9,8,8,8,6,4,10,10,3,3,
    5,10,5,4,11,9,9,3,2,10,5,4,5,3,5,10,7,9,6,6,5,2,14,13,6,1,13,9,4,4,
    14,7,7,6,5,4,8,6,1,10,8,2,1,3,7,12,6,7,13,10,4,20,7,1,1,2,5,6,9,17,
    7,15,4,5,3,14,6,6,2,6,4,8,2,14,1,5,10,13,8,10,10,10,6,7,9,7,2,7,3,5,
    4,8,3,8,14,7,6,9,19,12,3,19,11,10,10,10,7,2,5,12,4,8,3,8,1,12,5,7,7,5,
    10,2,6,11,12,5,5,10,6,7,8,13,9,2,1,16,7,8,6,9,13,6,9,5,6,8,5,4,8,4,
    5,5,6,26,7,3,5,14,13,7,5,9,12,7,11,7,11,9,6,26,14,8,11,4,4,13,8,6,9,8,
    5,2,5,10,7,5,9,9,6,12,5,10,2,8,6,13,8,10,10,2,14,14,2,6,8,3,9,5,3,10,
    3,8,5,4,16,9,11,9,13,9,3,8,7,3,4,3,8,2,8,13,8,8,14,7,6,17,7,15,8,7,
    14,6,6,13,9,9,3,24,10,5,3,16,10,6,14,3,9,4,5,12,5,4,5,7,6,2,11,12,5,10,
    7,11,4,8,5,6,15,5,15,0,9,5,6,4,12,21,9,9,6,3,10,7,6,3,10,11,15,5,0,7,
    9,8,9,2,16,12,4,4,10,4,3,14,11,8,3,6,14,5,7,6,9,8,10,5,10,6,9,5,12,9,
    11,6,5,2,8,13,12,3,7,8,6,10,7,9,13,11,4,4,13,4,12,4,7,10,1,13,7,4,13,9,
    0,6,17,2,8,14,8,5,4,7,0,15,6,6,6,6,7,5,11,14,15,11,5,12,7,10,4,11,11,12,
    18,15,3,4,9,5,5,7,18,11,15,6,18,4,16,14,7,14,8,10,9,7,7,5,4,8,5,5,7,3,
    6,3,4,13,7,6,7,8,4,5,9,3,8,26,8,5,7,9,7,6,8,0,7,7,13,15,3,22,10,15,
    4,11,9,8,14,5,9,5,6,8,4,3,10,12,12,10,10,7,11,6,4,6,5,4,2,10,9,6,7,9,
    11,4,22,5,10,2,4,9,14,10,10,11,8,9,7,6,10,7,3,8,3,13,14,1,2,13,3,8,19,1,
    2,8,4,0,8,0,5,1,4,3,5,7,11,2,12,10,4,2,9,6,12,5,4,15,5,4,14,4,1,5,
    9,12,1,6,2,9,6,11,3,1,5,8,13,2,8,6,2,4,4,16,11,8,13,4,7,12,8,1,1,9,
    9,16,4,6,8,7,7,8,8,2,3,8,1,5,7,4,2,5,11,4,10,2,19,13,15,9,5,7,7,10,
    8,4,4,9,6,5,14,3,2,8,7,12,8,6,5,15,3,4,8,3,13,5,1,4,15,9,8,8,23,1,
    4,7,4,7,8,14,7,6,17,22,8,7,1,16,6,12,8,3,3,10,9,7,18,8,7,4,10,2,5,3,
    6,5,19,8,6,6,7,12,1,7,11,5,5,7,3,11,2,4,4,10,4,7,9,18,6,0,4,5,5,6,
    7,4,10,3,7,7,4,7,8,8,7,12,12,8,20,21,2,12,2,4,3,9,6,6,12,6,5,24,14,6,
    10,13,9,8,5,3,12,13,3,11,14,6,3,10,5,10,3,7,9,6,11,5,10,12,6,7,8,3,11,6,
    11,3,6,11,4,9,2,7,3,7,7,8,5,15,1,12,3,5,1,4,7,4,4,10,9,7,3,9,1,1,
    7,2,10,2,8,14,5,16,1,7,10,14,4,15,13,5,3,6,10,7,8,8,10,5,18,12,11,7,10,4,
    3,6,8,5,3,10,12,10,9,9,5,7,4,14,5,11,5,12,7,10,8,14,8,10,10,3,8,9,5,13,
    3,10,1,4,2,6,2,7,6,4,3,1,9,5,6,9,9,12,10,5,10,4,2,14,2,14,3,6,4,10,
    6,2,6,4,1,5,4,11,9,4,7,3,9,5,21,15,4,5,12,6,3,9,8,8,8,6,7,6,10,6,
    12,9,4,13,7,7,13,13,5,8,13,6,11,5,9,9,11,7,13,2,8,9,12,4,7,12,4,2,3,1,
    8,11,2,12,11,10,10,8,7,5,2,4,8,8,5,16,3,8,4,10,6,15,7,4,4,4,10,12,5,5,
    6,9,3,15,6,7,13,3,2,6,9,2,6,7,3,9,6,6,4,2,9,9,18,7,6,14,13,12,11,4,
    9,2,2,5,3,4,2,6,9,13,8,10,8,4,6,9,7,6,5,21,16,1,5,6,9,6,6,5,12,6,
    5,17,6,10,5,1,6,20,10,7,2,9,10,8,7,8,7,3,11,5,1,7,8,6,12,4,3,3,13,3,
    3,10,6,4,6,13,7,9,15,7,2,8,12,16,6,12,5,13,11,3,9,13,10,8,9,9,5,8,8,4,
    1,9,3,10,1,17,3,10,4,11,9,6,15,5,11,5,7,7,16,5,6,8,2,14,5,4,10,4,6,14,
    10,7,14,10,7,17,5,2,7,9,2,9,11,10,9,6,14,3,17,2,10,11,3,10,3,11,5,5,20,6,
    15,14,7,10,7,3,8,3,1,8,12,5,8,10,3,6,10,17,10,11,8,7,15,4,2,4,8,3,14,13,
    8,14,0,2,4,1,13,6,8,13,5,2,6,12,10,7,2,13,5,1,10,14,3,14,6,3,21,7,16,6,
    2,7,5,6,10,11,10,1,7,4,5,17,5,6,5,12,9,3,11,1,3,6,8,6,14,8,4,8,19,7,
    1,9,11,7,3,6,12,9,10,4,15,7,3,4,8,6,3,3,9,23,5,9,6,9,1,9,3,1,6,9,
    5,4,0,9,6,6,6,5,8,2,8,7,11,3,8,5,0,6,3,10,9,3,9,15,10,11,5,1,3,9,
    8,1,5,4,10,3,8,7,4,11,19,3,7,8,9,9,3,17,10,4,3,8,9,8,9,10,16,6,3,5,
    3,8,1,3,5,10,4,4,5,6,2,10,8,3,5,8,6,8,11,9,3,8,12,3,10,1,11,21,1,10,
    11,6,5,7,7,4,15,12,8,4,7,9,17,1,12,4,13,4,16,4,4,7,8,11,5,4,3,3,5,3,
    5,14,3,7,8,13,17,4,4,4,14,7,8,10,9,10,7,10,6,4,3,6,7,10,4,10,4,15,3,12,
    2,6,10,4,3,10,1,5,5,2,8,3,8,4,10,4,4,12,6,4,4,12,18,3,9,6,7,10,2,5,
    10,12,16,3,9,3,4,6,5,7,8,7,8,1,2,9,18,9,5,7,7,13,7,6,11,5,12,6,4,5,
    3,2,4,1,4,6,9,7,4,16,15,5,18,14,5,9,5,6,8,2,7,5,3,9,12,10,8,4,9,4,
    9,4,3,6,7,11,9,5,9,6,5,2,6,6,2,3,5,3,5,8,7,3,9,9,7,8,6,7,4,11,
    12,6,4,3,13,14,8,6,15,8,4,2,7,10,15,10,10,13,10,3,3,6,1,14,8,4,4,5,4,10,
    4,4,10,9,11,4,3,8,3,3,6,5,15,12,8,12,6,4,11,4,3,10,11,7,1,6,7,16,8,3,
    7,4,7,12,2,13,4,3,3,8,1,8,12,11,3,5,9,13,1,6,3,4,7,17,12,14,9,9,9,17,
    14,2,13,7,5,4,6,5,11,23,2,23,3,8,4,3,4,7,17,6,8,4,7,11,7,3,6,10,8,9,
    3,3,11,2,2,12,6,7,16,9,8,9,1,5,3,11,7,4,4,9,2,7,7,3,7,7,3,18,14,5,
    7,16,3,5,7,2,6,10,6,5,8,3,6,9,4,3,6,5,3,7,8,3,19,8,2,5,9,10,6,3,
    13,6,4,12,10,7,5,6,5,14,5,2,9,7,1,9,5,13,9,6,1,16,16,2,12,4,10,20,0,7,
    7,9,6,5,11,13,9,5,13,2,2,9,0,7,5,15,2,17,7,5,9,12,3,0,2,5,3,18,2,2,
    11,4,11,7,12,4,3,13,9,4,15,7,6,0,19,5,6,14,3,6,2,7,1,11,13,5,4,4,13,8,
    2,5,17,9,8,3,4,9,10,4,4,4,17,9,15,4,7,7,2,4,10,5,2,16,11,8,15,9,8,10,
    13,6,8,3,17,4,8,12,6,10,6,23,13,8,6,4,14,4,4,17,5,20,7,6,15,13,6,4,4,12,
    16,11,7,5,8,8,7,8,8,3,1,6,13,5,1,9,2,4,5,4,11,4,2,4,4,4,0,8,8,8,
    1,19,3,9,8,16,11,2,6,14,5,13,11,8,3,2,9,4,10,3,3,18,6,7,6,11,7,7,14,7,
    15,11,15,7,7,4,4,9,5,22,7,6,6,11,7,14,0,10,10,12,11,4,5,2,8,1,12,5,2,8,
    4,10,6,5,6,3,13,12,8,6,10,17,12,11,4,6,11,7,8,3,5,9,9,1,13,5,12,6,16,5,
    4,7,7,12,11,7,7,2,5,7,4,5,14,0,6,7,4,3,5,19,6,14,19,3,8,6,10,8,6,4,
    5,8,1,9,7,6,12,3,8,6,8,4,8,14,11,16,0,9,19,9,8,4,13,7,2,11,4,5,8,5,
    6,9,6,7,2,3,5,6,10,5,8,4,8,18,10,7,13,4,12,8,14,16,9,12,6,7,6,6,9,7,
    6,7,2,11,12,10,3,3,11,8,9,3,11,20,5,9,6,8,4,3,0,6,7,7,4,6,10,1,4,7,
    4,3,10,13,5,4,5,4,1,10,6,7,4,7,8,8,8,9,4,4,11,6,10,8,2,11,10,7,13,9,
    14,17,6,2,5,3,8,7,10,2,12,15,1,10,7,9,9,3,7,7,4,10,7,4,5,9,7,9,10,11,
    11,9,11,4,8,5,6,7,1,7,11,11,10,1,2,8,3,9,2,7,8,3,3,10,7,6,2,3,6,9,
    6,11,10,7,3,15,10,7,12,6,9,5,3,14,11,9,11,9,11,5,6,6,3,4,9,8,13,8,4,6,
    19,5,5,7,18,14,1,6,9,4,9,13,6,14,18,3,16,12,7,5,10,16,4,3,6,14,4,11,3,7,
    2,7,16,10,13,21,9,4,14,1,10,13,6,10,18,2,3,11,2,3,4,5,6,10,6,10,2,2,6,4,
    2,4,3,9,4,4,4,10,10,8,3,3,5,5,3,7,3,5,10,9,8,9,4,7,3,8,13,3,8,15,
    4,5,1,8,7,8,4,4,7,6,9,15,22,7,13,1,2,11,2,16,12,7,5,7,6,3,8,3,3,7,
    4,15,4,4,3,7,10,3,3,7,6,8,22,4,5,8,6,3,10,4,12,13,4,2,8,10,9,2,5,12,
    3,3,16,4,10,13,18,4,13,12,15,3,7,0,4,8,8,9,6,3,8,10,9,11,5,13,15,19,13,13,
    8,6,2,1,9,5,10,9,4,7,2,4,9,9,8,9,6,11,9,4,7,5,12,12,11,11,7,4,7,9,
    1,6,2,11,6,10,6,2,10,2,3,17,15,8,3,11,6,1,4,3,11,6,7,8,3,5,10,16,9,28,
    7,11,10,11,5,12,11,4,5,3,7,10,5,5,8,12,2,7,7,0,8,8,6,11,9,11,6,4,6,3,
    11,4,7,6,10,5,2,4,8,15,13,3,7,4,1,7,5,3,5,6,0,14,4,10,4,15,4,16,8,5,
    7,4,6,15,4,4,10,8,8,8,5,15,8,5,4,7,7,12,12,4,7,0,9,15,12,4,9,4,7,8,
    1,4,9,5,9,8,11,11,5,8,7,4,5,4,7,9,3,8,4,4,12,5,11,13,14,5,7,4,6,10,
    8,3,3,6,7,3,19,10,3,9,7,19,9,8,11,1,8,0,8,12,3,7,10,14,17,5,7,6,6,7,
    16,4,5,7,5,6,11,8,7,11,1,14,4,7,5,15,12,7,8,6,7,9,14,5,4,6,4,20,6,3,
    6,7,6,6,9,12,12,9,2,2,8,3,6,4,1,7,3,6,6,6,6,4,5,8,9,2,5,10,3,13,
    2,2,12,9,2,4,11,4,1,8,10,3,16,3,8,3,5,5,6,2,7,6,15,16,11,4,6,23,7,10,
    9,9,4,6,4,7,7,7,11,5,10,5,8,3,8,8,6,8,6,13,12,6,1,5,10,8,4,16,13,17,
    6,10,12,7,1,14,6,4,7,4,9,3,15,5,11,2,3,7,8,6,14,4,9,2,7,4,8,6,4,8,
    3,3,8,10,7,4,15,10,3,8,6,5,7,6,7,1,8,4,5,4,7,7,2,1,17,11,5,9,18,4,
    7,7,12,10,7,11,2,5,3,4,6,16,8,7,9,0,3,7,5,1,3,12,7,8,17,6,1,7,22,4,
    5,5,3,14,6,9,12,11,13,1,7,13,5,13,9,15,21,10,3,9,4,6,6,7,11,8,1,6,13,5,
    8,12,9,10,5,18,8,9,18,4,3,15,9,8,10,2,9,13,6,5,5,2,2,5,7,4,4,9,12,17,
    2,4,6,11,5,7,9,10,10,9,6,4,3,9,12,4,5,18,4,0,16,10,9,11,9,1,4,11,7,5,
    8,7,6,4,5,7,5,11,6,7,8,11,2,7,6,4,10,2,6,2,10,12,1,10,14,15,4,0,10,12,
    12,19,3,18,15,2,3,3,5,11,14,3,10,7,7,13,7,8,9,10,5,9,3,4,4,8,11,2,8,9,
    3,7,2,3,7,10,8,11,2,9,16,10,3,10,6,6,3,4,10,2,8,8,7,4,21,15,7,9,8,2,
    8,6,9,3,8,3,7,8,7,15,7,8,8,7,5,3,9,7,9,7,10,5,20,8,5,6,3,4,8,3,
    1,12,3,5,0,8,16,10,1,4,16,5,9,16,6,8,0,4,5,2,16,1,4,2,11,4,3,9,6,15,
    8,1,3,5,10,4,4,12,9,9,8,3,6,20,5,14,7,2,3,2,4,8,4,5,9,11,6,9,3,12,
    3,0,4,9,10,7,8,6,3,10,6,11,15,5,14,5,11,11,16,4,5,3,11,1,5,6,4,8,3,9,
    4,5,1,12,12,7,7,6,8,2,4,10,7,18,2,8,9,15,13,15,5,7,6,10,5,7,12,4,10,6,
    10,6,9,5,3,5,8,6,5,6,12,5,6,10,12,13,6,8,9,4,5,4,10,8,7,3,6,11,3,0,
    3,6,21,7,15,5,11,14,13,12,8,10,4,6,5,6,9,20,3,8,2,2,5,5,7,4,11,5,11,17,
    9,19,13,5,13,0,9,1,9,1,11,6,2,2,3,18,2,11,7,3,4,8,9,4,6,13,5,12,5,8,
    10,4,8,12,2,5,4,9,3,8,9,7,8,6,7,16,9,9,10,12,2,5,16,3,11,5,7,9,5,7,
    2,7,14,2,3,12,6,8,7,5,3,8,3,3,12,4,9,12,9,8,12,10,7,10,3,3,7,18,14,0,
    2,6,11,3,9,2,7,2,5,5,9,3,11,6,13,9,14,7,1,7,5,11,5,2,13,7,4,15,8,15,
    3,5,3,11,9,9,5,6,9,6,3,6,4,3,0,6,4,7,5,8,3,4,6,9,2,0,7,11,8,7,
    6,9,1,7,5,3,9,3,9,8,8,14,3,10,6,5,11,6,4,4,12,3,12,5,5,3,8,8,2,9,
    6,2,4,3,11,10,10,18,9,9,7,7,11,10,28,8,9,0,6,4,4,12,6,5,5,1,6,10,17,3,
    16,14,8,4,7,5,8,19,6,5,6,4,7,7,15,9,8,3,11,11,5,5,3,7,10,26,5,9,6,6,
    2,13,17,1,4,8,5,13,4,7,11,7,2,12,8,17,10,8,3,7,8,4,4,11,5,10,10,11,9,3,
    1,4,10,6,7,4,9,1,8,7,3,3,6,13,8,6,9,6,6,3,16,6,8,9,3,11,21,15,1,7,
    5,6,2,6,9,4,9,4,6,11,11,10,3,11,8,5,8,12,4,4,7,6,3,5,3,8,3,9,10,3,
    9,4,8,3,23,5,9,3,14,7,12,7,10,6,7,4,8,11,12,10,3,6,14,4,12,6,10,2,13,7,
    6,9,5,14,9,7,11,1,12,5,10,9,8,10,1,6,10,15,4,7,4,6,8,9,3,2,7,4,3,16,
    6,15,8,5,8,21,2,7,4,5,1,7,12,5,2,3,2,9,4,3,4,10,6,5,7,1,7,8,11,9,
    0,4,0,7,11,4,12,5,17,9,2,1,6,5,7,8,10,21,4,9,11,2,9,7,13,7,14,4,17,9,
    8,6,9,5,5,10,3,6,6,1,8,13,1,3,8,12,2,4,1,8,15,3,4,6,10,7,6,12,3,6,
    3,8,3,7,11,18,6,5,8,4,12,23,2,12,3,11,8,6,9,6,7,11,5,12,6,4,8,6,2,13,
    5,4,1,8,8,11,1,10,9,9,13,4,13,15,7,5,8,7,19,3,10,10,5,4,13,10,6,13,12,16,
    8,4,22,20,6,3,8,9,13,6,11,7,11,3,4,8,4,5,12,6,7,6,6,5,11,2,9,1,17,3,
    11,12,7,1,2,5,19,5,11,6,4,8,6,9,12,6,1,1,0,21,1,5,9,9,9,6,3,10,13,10,
    5,11,4,8,10,13,1,3,5,3,7,2,9,9,7,17,12,9,9,11,17,5,8,8,3,5,10,2,6,15,
    9,3,16,14,3,5,5,4,2,2,5,7,8,8,6,3,9,4,5,9,6,7,7,10,8,4,13,22,4,13,
    2,6,5,1,7,8,3,4,4,8,1,12,11,3,4,8,5,12,7,11,4,11,6,6,1,1,10,6,18,9,
    6,3,9,19,2,12,6,4,3,8,4,8,2,7,28,9,5,4,3,6,2,6,30,4,11,7,3,2,5,7,
    4,4,11,7,10,9,7,5,8,13,12,9,8,5,7,11,2,3,13,15,11,8,12,3,7,6,1,7,10,6,
    4,5,11,4,1,15,14,5,9,4,4,2,7,2,20,12,7,9,4,9,2,1,13,3,5,7,4,6,4,9,
    1,16,6,3,3,4,8,8,6,8,6,4,4,9,11,7,4,7,5,3,3,6,8,5,9,17,4,6,7,11,
    4,7,3,7,0,8,10,6,11,15,4,5,4,14,9,13,5,4,7,14,13,9,8,9,9,4,2,1,6,6,
    9,4,8,24,8,3,15,10,16,9,10,1,9,17,7,6,5,8,5,7,11,15,13,1,7,5,4,10,3,12,
    3,12,3,11,9,7,13,12,5,19,10,11,3,7,6,9,15,2,18,3,14,9,8,8,16,5,11,10,9,5,
    5,7,6,8,18,3,7,4,8,10,8,7,12,5,5,6,12,12,5,10,10,8,4,3,13,5,6,8,4,3,
    8,2,2,8,3,8,7,16,6,4,0,14,4,16,9,6,6,7,5,2,4,13,7,7,6,18,11,8,5,13,
    8,6,5,4,9,5,5,14,6,3,8,10,3,9,5,6,7,2,13,11,8,9,11,2,8,13,20,3,6,6,
    1,9,9,5,16,5,3,15,1,11,11,12,8,9,3,9,12,13,9,5,2,6,1,9,20,6,24,6,13,13,
    8,8,9,19,9,5,5,11,11,14,10,2,5,20,7,12,3,5,9,7,6,10,11,5,8,11,8,2,9,11,
    8,6,5,3,12,7,7,10,4,6,30,12,2,5,13,6,4,4,12,10,1,3,4,7,2,8,10,9,3,4,
    10,4,3,12,22,5,13,7,2,10,4,9,10,3,11,4,14,12,10,6,5,5,4,15,18,4,6,4,8,7,
    5,6,3,15,6,1,14,11,15,15,6,4,3,10,10,14,15,11,3,5,10,11,2,8,4,1,12,11,6,6,
    9,9,3,6,6,5,6,11,4,15,16,20,4,2,11,8,7,9,5,0,9,9,13,2,10,1,5,5,8,5,
    4,10,10,2,6,8,8,7,9,6,2,8,3,7,5,14,6,9,4,6,6,8,0,5,5,6,5,2,17,5,
    6,7,4,7,5,13,16,0,4,14,4,10,6,16,6,8,13,14,8,9,9,6,0,10,3,13,10,1,15,11,
    4,12,3,4,5,5,7,9,7,7,9,3,11,12,7,11,2,8,3,5,3,13,7,12,12,4,11,6,12,2,
    10,10,4,20,15,8,2,8,7,6,4,2,10,7,12,12,3,7,10,4,3,4,6,2,4,15,4,9,6,5,
    9,9,8,8,4,6,1,13,5,10,4,10,6,16,4,13,7,1,10,8,2,7,2,9,7,16,13,10,2,5,
    8,5,11,13,3,3,11,8,7,7,4,7,6,14,5,5,20,10,6,8,14,12,3,6,14,5,3,11,7,11,
    3,3,3,0,6,9,10,6,9,6,12,3,15,8,8,3,9,3,2,3,11,3,1,3,7,8,11,9,2,18,
    4,5,7,5,4,6,4,13,4,3,6,10,5,5,7,9,14,12,9,3,8,6,8,9,2,8,10,2,16,17,
    4,5,3,8,9,7,8,7,9,8,7,3,8,11,4,19,3,3,4,7,4,9,12,11,4,11,6,13,6,3,
    7,6,4,6,11,6,3,4,6,9,11,10,11,10,9,6,10,8,11,18,17,2,14,1,7,11,11,3,7,5,
    2,7,9,12,7,6,17,4,2,18,5,8,4,6,11,8,2,8,4,4,8,6,4,11,10,7,2,6,0,18,
    11,12,15,6,6,14,6,16,2,8,15,17,15,2,2,7,3,1,4,5,13,4,3,3,10,8,3,6,2,7,
    7,11,7,13,12,12,3,5,3,7,13,19,7,10,8,13,10,9,11,1,13,5,9,10,13,2,7,12,3,0,
    7,8,7,14,7,8,7,6,10,13,5,10,21,13,24,3,9,6,4,4,6,16,6,6,9,7,12,3,8,13,
    7,8,7,5,6,6,7,6,8,13,6,3,8,11,3,7,3,14,13,9,9,8,1,9,8,4,6,11,14,8,
    14,9,7,4,6,9,7,12,13,9,3,8,5,8,10,7,4,7,17,9,5,6,0,5,11,6,4,2,1,2,
    9,14,7,3,10,6,9,1,5,7,18,7,8,5,5,8,5,7,4,10,4,10,7,8,5,13,8,13,19,13,
    11,6,9,8,7,14,12,0,10,3,4,7,13,4,8,10,3,8,6,8,10,5,16,2,4,13,13,8,10,18,
    7,9,13,12,0,8,8,6,5,3,12,6,7,7,6,1,13,5,5,8,8,2,5,6,10,6,11,3,10,14,
    14,7,6,5,4,16,11,14,4,3,2,11,8,0,2,12,0,9,3,10,1,10,4,7,4,11,5,15,7,13,
    7,4,11,3,2,8,7,3,3,7,6,13,7,4,16,22,5,6,2,13,5,1,6,5,7,7,2,4,5,13,
    8,10,7,8,4,7,3,6,15,11,7,7,11,15,3,7,8,9,13,5,6,7,2,8,4,5,8,1,13,19,
    7,9,5,3,13,7,9,12,7,6,27,7,6,10,7,4,6,9,11,4,7,13,2,4,13,11,19,5,4,9,
    0,3,6,3,4,4,17,8,4,8,8,10,7,4,13,13,9,6,8,5,11,4,0,4,10,5,8,10,7,5,
    9,5,4,10,4,16,12,7,9,5,2,4,13,4,5,3,11,5,1,3,14,9,11,8,15,11,3,7,14,11,
    8,7,4,5,2,11,14,2,12,10,2,5,3,8,2,5,17,6,5,7,6,10,0,7,8,3,7,14,7,4,
    4,5,15,8,8,6,7,5,7,6,5,11,2,4,3,11,10,4,7,7,5,6,8,3,5,7,5,4,7,8,
    8,5,8,12,1,1,9,6,9,9,7,3,3,5,7,2,9,13,7,7,7,19,7,7,11,6,9,4,4,8,
    16,10,16,8,3,8,11,6,1,11,7,12,15,3,16,7,5,8,1,5,9,7,9,8,10,9,8,7,4,16,
    9,7,9,0,9,11,5,9,11,5,8,4,1,1,4,10,6,1,8,3,9,8,7,2,3,14,6,2,8,5,
    13,8,6,10,13,4,2,7,12,10,3,5,2,6,8,3,5,5,3,12,8,2,13,3,8,3,7,13,5,9,
    9,2,12,6,12,11,7,4,10,2,5,2,10,9,13,6,11,7,7,21,7,14,3,10,7,5,8,9,3,7,
    9,5,8,2,10,15,0,15,1,2,6,7,6,9,13,5,7,8,6,2,12,7,3,6,9,4,10,7,9,8,
    19,2,4,1,15,12,1,9,13,6,8,15,3,9,6,12,6,4,8,11,3,11,9,4,2,10,8,8,15,7,
    4,20,5,2,9,8,5,7,4,14,3,3,6,6,7,7,5,8,10,10,11,14,10,8,10,6,8,9,15,3,
    5,4,3,5,8,6,8,8,14,1,7,1,5,9,10,13,9,11,4,15,8,9,11,2,5,3,9,0,10,4,
    8,8,2,9,5,3,2,7,8,6,9,17,6,5,6,2,6,10,8,8,12,8,7,7,2,9,11,4,8,14,
    8,10,6,12,5,3,4,7,3,18,15,2,3,9,4,0,2,19,10,16,4,9,6,3,13,11,17,11,9,5,
    2,5,10,12,8,17,7,3,10,5,3,8,3,2,7,8,8,15,2,7,2,17,4,9,13,5,1,7,5,7,
    7,3,9,15,8,10,21,8,14,6,7,6,4,11,1,9,8,15,5,10,5,16,6,4,11,18,12,6,13,8,
    6,6,8,7,4,18,3,12,6,14,7,8,20,4,9,2,20,7,1,8,6,9,3,5,6,28,9,10,11,5,
    7,10,12,5,8,9,6,7,4,7,7,1,8,12,2,12,14,6,2,16,6,6,5,7,12,10,5,15,9,8,
    8,21,11,11,10,7,9,6,9,8,4,9,4,11,7,7,7,4,8,9,18,15,3,3,6,8,2,8,13,7,
    13,13,4,16,7,12,6,10,12,6,6,11,5,0,9,4,8,13,9,2,11,3,5,3,1,10,10,12,2,9,
    3,5,2,8,4,7,10,4,7,4,15,1,5,8,5,6,7,19,9,6,2,9,8,7,12,5,5,5,12,4,
    3,3,7,1,3,6,16,5,11,6,10,22,4,10,18,7,4,4,1,8,2,3,7,5,9,14,5,2,2,4,
    5,5,9,8,14,5,12,4,4,6,6,3,10,7,7,11,3,5,6,9,9,6,4,4,4,6,6,14,4,11,
    14,6,7,11,14,8,6,2,4,0,3,8,1,13,2,16,8,7,8,3,5,10,4,4,8,7,6,4,16,4,
    2,9,2,13,0,5,4,10,5,5,5,2,5,8,11,9,3,20,8,6,4,15,10,13,3,10,9,7,4,5,
    7,2,11,9,5,3,9,1,3,3,8,6,9,6,6,13,4,14,8,3,7,5,13,7,11,6,8,7,12,13,
    7,1,7,7,1,6,7,18,2,11,7,9,13,8,3,11,12,5,10,3,7,5,8,4,7,12,10,8,7,15,
    7,7,4,3,5,11,6,5,3,11,11,10,4,7,6,13,13,11,2,5,12,13,4,4,6,3,6,4,8,10,
    2,1,4,12,7,8,6,4,11,5,8,9,3,6,6,2,4,18,7,10,4,19,6,12,3,3,4,3,10,14,
    2,5,10,6,8,11,6,6,2,8,9,3,6,1,2,2,7,3,4,1,4,12,11,5,9,6,4,7,1,1,
    3,17,8,8,7,5,11,14,1,4,3,2,8,4,3,7,5,8,9,7,4,11,6,8,14,5,8,12,7,13,
    9,14,7,7,5,12,4,10,3,4,11,2,6,2,12,8,1,5,3,16,4,7,5,5,2,7,12,3,3,0,
    12,5,6,13,6,1,2,3,0,1,8,7,8,17,7,14,6,2,10,10,3,10,3,12,2,9,5,5,6,11,
    7,4,1,5,10,5,11,3,15,8,12,3,3,4,7,3,7,5,6,3,9,5,1,5,10,3,19,4,6,5,
    4,3,7,7,3,12,10,9,8,7,13,12,7,1,7,6,5,2,12,8,16,2,9,8,12,9,11,16,6,5,
    4,5,6,14,11,7,17,7,9,10,6,4,9,5,3,8,16,1,2,5,7,6,4,3,6,2,8,7,1,5,
    7,5,4,8,9,14,4,1,4,5,14,9,9,7,1,10,9,4,18,10,7,6,3,3,9,21,10,14,5,9,
    7,5,12,7,6,8,12,12,2,8,6,3,3,21,3,2,14,18,12,10,5,13,5,6,4,16,13,14,9,7,
    5,2,8,11,7,10,5,6,6,2,11,6,5,6,16,9,7,12,2,10,7,11,14,2,3,3,0,9,6,9,
    5,7,10,11,3,4,7,9,6,3,7,5,9,3,9,4,20,4,3,9,9,17,0,18,9,6,11,12,8,9,
    1,6,14,11,3,4,4,6,7,3,8,14,8,8,5,3,13,2,12,4,5,10,2,9,8,7,6,9,6,10,
    6,6,4,7,8,0,12,9,5,15,4,8,4,4,7,6,12,11,7,8,8,10,5,8,3,7,7,17,16,9,
    11,10,12,6,3,10,11,9,5,9,9,1,4,13,3,0,9,4,10,0,10,9,4,6,8,7,3,9,8,6,
    10,9,5,7,2,12,18,3,8,9,6,10,2,2,4,5,7,11,12,1,4,4,4,9,8,11,3,11,6,8,
    16,2,8,5,4,11,8,3,7,1,13,5,4,17,8,7,24,7,5,6,4,13,8,7,10,7,10,5,11,12,
    10,2,13,5,5,12,9,8,5,12,7,7,4,4,10,0,4,1,13,5,4,11,3,11,8,7,7,18,10,10,
    9,2,5,4,12,3,7,5,6,5,9,6,5,1,9,5,14,0,6,5,6,0,11,3,7,8,10,13,5,4,
    4,6,7,4,15,6,17,3,10,13,1,13,17,7,7,3,3,8,7,2,15,9,4,8,9,15,6,7,9,11,
    10,7,6,8,9,5,3,11,4,10,5,3,3,8,9,8,10,23,8,2,7,4,5,6,7,10,10,3,6,10,
    3,11,14,2,8,9,1,5,4,10,10,10,12,3,6,10,12,11,3,6,10,14,8,8,6,4,7,2,4,10,
    9,9,10,12,6,5,12,8,16,2,6,13,9,7,13,2,7,5,5,5,12,11,12,14,8,1,3,5,17,14,
    ]
var num_fish_in_ponds = jsPsych.randomization.shuffle(num_fish_in_ponds)
var indx_fish_curr_pond = 0
var num_fish_curr_pond = num_fish_in_ponds[indx_fish_curr_pond]
var red_fish_num = num_fish_curr_pond

var trip_bank = 0
var tournament_bank = 0
var total_points = 0 // used to determine bonus pay
    //each block defines the weather and release law

var blocks = [{
    weather: "Sunny",
    release: "Keep"
}]
var exp_stage = 'practice'
var practiceblocks = jsPsych.randomization.shuffle(blocks)
var blocks = jsPsych.randomization.shuffle(blocks)
var pay = 1 // payment for one red fish

var lake_state = '' //variable for redrawing the board from trial to trial
var trial_num = 0 // global variable to track the number of trials into a round
var round_num = 0 // global variable to track the number of rounds into a tournament
var round_over = 0 //equals 1 if a blue fish is caught or the participant 'collects'
var round_over_text = '' 

//Variables for placing fish
var maxSearchIterations = 100;
var min_x = 0
var max_x = 0
var min_y = 0
var max_y = 0
var filled_areas = [];
var fish_appear_timeout = null;
var main_timeout = null;

var game_setup = "<div class = titlebox><div class = center-text>Angelexperiment</div></div>" +
    "<div class = lake></div>" +
    // "<div class = cooler><p class = info-text>&nbsp<strong>Red Fish in Cooler: </strong></p></div>" +
    //"<div class = weatherbox><div class = center-text id = weathertext></div></div>" +
    "<div class = infocontainer>" +
    "<div class = subinfocontainer>" +
    // "<div class = infobox><p class = info-text id = red_count>&nbsp<strong># Red Fish in lake: </strong></p></div>" +
    // "<div class = infobox><p class = info-text id = blue_count>&nbsp<strong># Blue Fish in lake: </strong></p></div>" +
    "</div>" +
    "<div class = subimgcontainer>" +
    "<div class = imgbox></div>" +
    "</div>" +
    "<div class = subinfocontainer>" +
    "<div class = infobox><p class = info-text id = trip_bank><strong>Fische (Teich): </strong></p></div> " +
    "<div class = infobox><p class = info-text id = tournament_bank><strong>Bonuspunkte Gesamt: </strong></p></div>" +
    "</div>" +
    "</div>" +
    "<div class = buttonbox><button id = 'goFish' class = select-button onclick = goFish(true) disabled>Fischen</button><button id = 'Collect' class = select-button onclick = collect()>Teich wechseln</button> <button id = 'hiddenTrigger' class = select-button onclick = goFish(false) hidden></button> </div>"
    /* ************************************ */
    /* Set up jsPsych blocks */
    /* ************************************ */
    // Set up attention check node
var attention_check_block = {
    type: 'attention-check',
    timing_response: 180000,
    response_ends_trial: true,
    timing_post_trial: 0
}

var attention_node = {
    timeline: [attention_check_block],
    conditional_function: function() {
        return run_attention_checks
    }
}

//Set up post task questionnaire
var post_task_block = {
   type: 'survey-text',
   data: {
       trial_id: "post task questions"
   },
   questions: ['<p class = center-block-text style = "font-size: 20px">Please summarize what you were asked to do in this task.</p>',
              '<p class = center-block-text style = "font-size: 20px">Do you have any comments about this task?</p>'],
   rows: [15, 15],
   columns: [60,60]
};

/* define static blocks */
var feedback_instruct_text =
    'Welcome to the experiment. This experiment will take 25 minutes. Press <strong>enter</strong> to begin. </br> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Test-Logo.svg/783px-Test-Logo.svg.png.jpg" alt="Girl in a jacket" width=300>'
var feedback_instruct_block = {
    type: 'poldrack-text',
    cont_key: [13],
    data: {
        trial_id: 'instruction'
    },
    text: getInstructFeedback,
    timing_post_trial: 0,
    timing_response: 180000
};
/// This ensures that the subject does not read through the instructions too quickly.  If they do it too quickly, then we will go over the loop again.
var instructions_block = {
    type: 'poldrack-instructions',
    pages: [
        '<div class = centerbox><p class = block-text>In this task, you will participate in a fishing tournament. During this tournament you will play a fishing game for multiple rounds. Each round, you will see a lake which has many fish in it. Your goal is to catch as many fish as possible.</p><p class = block-text>On the screen you will see a lake and two buttons: "Go Fish" and "Collect". If you "Go Fish" you randomly catch one of the fish in the lake. Each fish is equally likely.</p><p class = block-text>There are many red fish in the lake and one blue fish. Each red fish earns you 1 point towards that round\'s "Trip Bank", which you can then "Collect" to move the points to your "Total Fish Caught" and start a new round. However, if you catch the blue fish, the round will end and you will lose all the points you earned that round.</p><p class = block-text>To keep your points from round to round you must  stop fishing and press "Collect" before you catch a blue fish.</p><p class = block-text>After you end instructions you will play ' + num_practice_rounds + ' rounds of the fishing game to practice.</p></div>'
    ],
    allow_keys: false,
    data: {
        trial_id: 'instruction'
    },
    show_clickable_nav: true,
    timing_post_trial: 0
};

var instruction_node = {
    timeline: [feedback_instruct_block, instructions_block],
    /* This function defines stopping criteria */
    loop_function: function(data) {
        for (i = 0; i < data.length; i++) {
            if ((data[i].trial_type == 'poldrack-instructions') && (data[i].rt != -1)) {
                rt = data[i].rt
                sumInstructTime = sumInstructTime + rt
            }
        }
        if (sumInstructTime <= instructTimeThresh * 1000) {
            feedback_instruct_text =
                'Read through instructions too quickly.  Please take your time and make sure you understand the instructions.  Press <strong>enter</strong> to continue.'
            return true
        } else if (sumInstructTime > instructTimeThresh * 1000) {
            feedback_instruct_text = 'Ende der Anleitung. Drücken Sie <strong>enter</strong> um fortzufahren.'
            return false
        }
    }
}

var conditions_instructions_block = {
    type: 'poldrack-instructions',
    pages: [
        '<div class = centerbox><p class = block-text><p class = block-text>You will participate in four tournaments, each with different rules. One way the tournaments differ is whether you keep or release the fish you catch. In the <span style="color:red">Catch N Release</span> condition, you will always release the fish you just caught so the number of red and blue fish will stay the same throughout the round.</p><p class = block-text>In the <span style="color:red">Catch N Keep</span> condition, the fish you catch will come out of the lake and go into your cooler. Thus the chance of catching a blue fish increases each time you catch a red fish.</p></div>',
        '<div class = centerbox><p class = block-text>The <span style="color:blue">weather</span> will also differ between tournaments. When the weather is <span style="color:blue">sunny</span> you will be able to see how many fish are in the lake. There will also be counters below the lake that tell you exactly how many red and blue fish are still in the lake.</p><p class = block-text>When the weather is <span style="color:blue">cloudy</span>, the lake is murky and you will be unable to see any fish. The counters will also be blank. The keep or release rules still apply however. If you are in <span style="color:red">Catch N Release</span>, the number of fish in the lake stay the same after each "Go Fish". If you are in <span style="color:red">Catch N Keep</span>, the fish come out of the lake.</p></div>',
        '<div class = centerbox><p class = block-text>You will play one tournament with each combination of <span style="color:blue">weather</span> (sunny or cloudy) and <span style="color:red">release</span> (release or keep) rules. Each tournament is independent. The points you earn in one tournament has no effect on the next. Your goal is to do as well as possible on all four tournaments.</p><p class = block-text>You can earn bonus pay by doing well on the tasks so try your best to maximize your earnings! Your bonus pay will be proportional to your earnings.</p></div>',
        '<div class = centerbox><p class = block-text>Before we start the tournaments, there will be a brief practice session for each of the four tournaments. Before each practice tournament starts you will choose the number of fish in the lake (1-200). During the actual experiment, you will not be able to choose the number of fish.</p></div>'
    ],
    allow_keys: false,
    data: {
        trial_id: 'instruction'
    },
    show_clickable_nav: true,
    timing_post_trial: 0
};

var end_block = {
    type: 'poldrack-text',
    
    text: '<div class = infobox><p class = info-text id = tournament_bank><strong>Bonuspunkte Gesamt:'+tournament_bank+' </strong></p></div> Drücken Sie <strong>enter</strong> um fortzufahren.</p></div>',

    cont_key: [13],
    data: {
        trial_id: "end",
        exp_id: 'angling_risk_task'
    },
    timing_response: 180000,
    timing_post_trial: 0,
    on_finish: assessPerformance
};

var round_over_block = {
    type: 'poldrack-text',
    text: getRoundOverText,
    cont_key: [13],
    timing_response: 180000,
    data: {
        trial_id: "round_over"
    },
    timing_post_trial: 30000,
    on_finish: function() {
        jsPsych.data.addDataToLastTrial({
            exp_stage: exp_stage
        })
    },
};

var update_performance_var_block = {
    type: 'call-function',
    data: {
        trial_id: 'update_performance_var'
    },
    func: function() {
        total_points += tournament_bank
    }
}


var game_block = {
    type: 'single-stim-button',
    stimulus: getGame,
    button_class: 'select-button',
    data: get_data,
    timing_post_trial: 0,
    on_finish: function() {
        jsPsych.data.addDataToLastTrial({
            'round_num': round_num,
            'total_fish_in_pond': num_fish_in_ponds[indx_fish_curr_pond - 1],
            'trip_bank': trip_bank,
            'tournament_bank': tournament_bank
        })
    }
};

var game_node = {
    timeline: [game_block],
    loop_function: function(data) {
        if (round_over == 1) {
            return false
        } else {
            return true
        }
    }
}


/*
Set up instructions
*/


var intro_1 = {
    type: 'poldrack-text',
    data: {
        trial_id: "test_intro"
    },
    timing_response: 180000,
    text: '<div class = intro_1><div></div></div>',
    cont_key: [13],
    timing_post_trial: 0,
    on_finish: function() {
        tournament_bank = 0
        exp_stage = 'test'
    }
};
var intro_2 = {
    type: 'poldrack-text',
    data: {
        trial_id: "test_intro"
    },
    timing_response: 180000,
    text: '<div class = intro_2><div></div></div>',
    cont_key: [13],
    timing_post_trial: 0,
    on_finish: function() {
        tournament_bank = 0
        exp_stage = 'test'
    }
};

var intro_3 = {
    type: 'poldrack-text',
    data: {
        trial_id: "test_intro"
    },
    timing_response: 180000,
    text: '<div class = intro_3><div></div></div>',
    cont_key: [13],
    timing_post_trial: 0,
    on_finish: function() {
        tournament_bank = 0
        exp_stage = 'test'
    }
};

var intro_4 = {
    type: 'poldrack-text',
    data: {
        trial_id: "test_intro"
    },
    timing_response: 180000,
    text: '<div class = intro_4><div></div></div>',
    cont_key: [13],
    timing_post_trial: 0,
    on_finish: function() {
        tournament_bank = 0
        exp_stage = 'test'
    }
};

var intro_5 = {
    type: 'poldrack-text',
    data: {
        trial_id: "test_intro"
    },
    timing_response: 180000,
    text: '<div class = intro_5><div></div></div>',
    cont_key: [13],
    timing_post_trial: 0,
    on_finish: function() {
        tournament_bank = 0
        exp_stage = 'test'
    }
};

var intro_6 = {
    type: 'poldrack-text',
    data: {
        trial_id: "test_intro"
    },
    timing_response: 180000,
    text: '<div class = intro_6><div></div></div>',
    cont_key: [13],
    timing_post_trial: 0,
    on_finish: function() {
        tournament_bank = 0
        exp_stage = 'test'
    }
};

var intro_7 = {
    type: 'poldrack-text',
    data: {
        trial_id: "test_intro"
    },
    timing_response: 180000,
    text: '<div class = intro_7><div></div></div>',
    cont_key: [13],
    timing_post_trial: 0,
    on_finish: function() {
        tournament_bank = 0
        exp_stage = 'test'
    }
};

// Setup task
angling_risk_task_experiment = []
// angling_risk_task_experiment.push(instruction_node)

// Practice basic layout
weather = "Sunny"
release = "Keep"
weather_rule = "you can see how many fish are in the lake"
release_rule = "the fish you catch comes out of the lake"
var tournament_intro_block_practice = {
    type: 'poldrack-text',
    text: '<div class = centerbox><p class = center-block-text>You will now start a tournament. The weather is <span style="color:blue">' +
        weather + '</span> which means ' + weather_rule +
        '. The release rule is <span style="color:red">' + release + '</span>, which means ' +
        release_rule +
        '.</p><p class = center-block-text>Press <strong>enter</strong> to begin.</p></div>',
    cont_key: [13],
    timing_response: 180000,
    data: {
        weather: weather,
        release: release,
        exp_stage: "practice",
        trial_id: "intro"
    },
    on_finish: function(data) {
        weather = data.weather
        release = data.release
        tournament_bank = 0
        round_num = 0
    }
}


angling_risk_task_experiment.push(intro_1)
angling_risk_task_experiment.push(intro_2)
angling_risk_task_experiment.push(intro_3)
angling_risk_task_experiment.push(intro_4)
angling_risk_task_experiment.push(intro_5)
angling_risk_task_experiment.push(intro_6)
angling_risk_task_experiment.push(intro_7)


// TODO: Remove this blocks iteration, doesn't make sense
for (b = 0; b < blocks.length; b++) {
    block = blocks[b]
    weather = block.weather
    release = block.release
    weather_rule = "you can see how many fish are in the lake"
    
    var tournament_intro_block = {
        type: 'poldrack-text',
        text: '<div class = centerbox><p class = center-block-text>Das Angelexperiment beginnt jetzt.' +
            '</p><p class = center-block-text>Drücken sie <strong>enter</strong> um zu starten.</p></div>',
        cont_key: [13],
        timing_response: 120000,
        data: {
            weather: weather,
            release: release,
            trial_id: "intro",
            exp_stage: "test"
        },
        on_finish: function(data) {
            weather = data.weather
            release = data.release
            tournament_bank = 0
            round_num = 0
        }
    }
    angling_risk_task_experiment.push(tournament_intro_block)
    for (i = 0; i < num_rounds; i++) {
        angling_risk_task_experiment.push(game_node)
        angling_risk_task_experiment.push(round_over_block)
    }
    if ($.inArray(b, [0, 2]) != -1) {
        angling_risk_task_experiment.push(attention_node)
    }
    angling_risk_task_experiment.push(update_performance_var_block)
}
angling_risk_task_experiment.push(end_block)
